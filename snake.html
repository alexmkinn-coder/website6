<!DOCTYPE html>
<html>
<head>
    <title>Neon Snake: Pro Edition</title>
    <style>
        body { 
            background: #0b0b0b; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            font-family: 'Courier New', Courier, monospace; 
            color: #00ff99;
            overflow: hidden;
        }

        /* START SCREEN STYLES */
        #start-screen {
            text-align: center;
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border: 2px solid #00ff99;
            box-shadow: 0 0 30px #00ff99;
            border-radius: 15px;
            z-index: 20;
        }

        h1 { font-size: 3rem; margin-bottom: 20px; text-shadow: 0 0 10px #00ff99; }

        .menu-section { margin-bottom: 20px; border-top: 1px solid #333; padding-top: 15px; }

        button.start-btn {
            background: #00ff99;
            color: #000;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }

        button.start-btn:hover { transform: scale(1.1); box-shadow: 0 0 20px #00ff99; }

        select {
            background: #222;
            color: #00ff99;
            border: 1px solid #00ff99;
            padding: 5px;
            margin: 5px;
        }

        /* GAME STYLES */
        #game-ui { display: none; flex-direction: column; align-items: center; }
        canvas { border: 2px solid #00ff99; box-shadow: 0 0 20px #00ff99; background: #000; }
        #score-board { font-size: 24px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div id="start-screen">
        <h1>NEON SNAKE</h1>
        
        <div class="menu-section">
            <label>Field Size:</label>
            <select id="field-size">
                <option value="400">Normal (400x400)</option>
                <option value="600">Giant (600x600)</option>
                <option value="300">Tight (300x300)</option>
            </select>
        </div>

        <div class="menu-section">
            <label>Game Mode:</label>
            <select id="game-mode">
                <option value="1">Classic (1 Food)</option>
                <option value="3">Buffet (3 Food)</option>
                <option value="10">Mayhem (10 Food!)</option>
            </select>
        </div>

        <button class="start-btn" onclick="startGame()">ENTER THE GRID</button>
    </div>

    <div id="game-ui">
        <div id="score-board">Score: 0</div>
        <canvas id="game"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score-board');
        const startScreen = document.getElementById('start-screen');
        const gameUI = document.getElementById('game-ui');

        let score = 0;
        let gridSize = 20;
        let snake = [];
        let dx, dy, foods = [], foodCount, loop;

        function startGame() {
            // Get Settings
            const size = parseInt(document.getElementById('field-size').value);
            foodCount = parseInt(document.getElementById('game-mode').value);

            // Set Canvas
            canvas.width = size;
            canvas.height = size;

            // Initialize Snake
            snake = [{x: 160, y: 160}, {x: 140, y: 160}, {x: 120, y: 160}];
            dx = gridSize;
            dy = 0;
            score = 0;
            foods = [];

            // UI Switch
            startScreen.style.display = 'none';
            gameUI.style.display = 'flex';

            // Generate initial food
            for(let i=0; i<foodCount; i++) createFood();

            runGame();
        }

        function runGame() {
            if (didGameEnd()) {
                alert("DE-RESSED! Final Score: " + score);
                location.reload(); 
                return;
            }

            setTimeout(() => {
                clearCanvas();
                drawFoods();
                advanceSnake();
                drawSnake();
                runGame();
            }, 80); // Slightly faster speed
        }

        function clearCanvas() {
            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function drawSnake() {
            snake.forEach((part, index) => {
                ctx.fillStyle = index === 0 ? "#00ff99" : "#008855";
                ctx.shadowBlur = index === 0 ? 10 : 0;
                ctx.shadowColor = "#00ff99";
                ctx.fillRect(part.x, part.y, gridSize - 2, gridSize - 2);
            });
            ctx.shadowBlur = 0;
        }

        function advanceSnake() {
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            snake.unshift(head);

            let ateFood = false;
            foods.forEach((f, index) => {
                if (head.x === f.x && head.y === f.y) {
                    score += 10;
                    scoreElement.innerHTML = "Score: " + score;
                    foods.splice(index, 1);
                    createFood();
                    ateFood = true;
                }
            });

            if (!ateFood) snake.pop();
        }

        function didGameEnd() {
            for (let i = 4; i < snake.length; i++) {
                if (snake[i].x === snake[0].x && snake[i].y === snake[0].y) return true;
            }
            return snake[0].x < 0 || snake[0].x >= canvas.width || snake[0].y < 0 || snake[0].y >= canvas.height;
        }

        function createFood() {
            const newFood = {
                x: Math.floor(Math.random() * (canvas.width / gridSize)) * gridSize,
                y: Math.floor(Math.random() * (canvas.height / gridSize)) * gridSize
            };
            foods.push(newFood);
        }

        function drawFoods() {
            ctx.fillStyle = "#ff0066";
            ctx.shadowBlur = 8;
            ctx.shadowColor = "#ff0066";
            foods.forEach(f => {
                ctx.fillRect(f.x, f.y, gridSize - 2, gridSize - 2);
            });
            ctx.shadowBlur = 0;
        }

        document.addEventListener('keydown', (e) => {
            const keyPressed = e.keyCode;
            if (keyPressed === 37 && dx === 0) { dx = -gridSize; dy = 0; }
            if (keyPressed === 38 && dy === 0) { dx = 0; dy = -gridSize; }
            if (keyPressed === 39 && dx === 0) { dx = gridSize; dy = 0; }
            if (keyPressed === 40 && dy === 0) { dx = 0; dy = gridSize; }
        });
    </script>
</body>
</html>
